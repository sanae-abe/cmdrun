# cmdrun 実装ロードマップ

## 全体タイムライン

```
Phase 1: Core MVP          (2週間) → 基本機能実装
Phase 2: Advanced Features (2週間) → 高度機能追加
Phase 3: Polish & Release  (1週間) → 品質向上・リリース
Phase 4: Adoption & Growth (継続)  → 機能拡張・コミュニティ育成
```

## Phase 1: Core MVP（2週間）

### Week 1: 基盤構築

#### Day 1-2: プロジェクトセットアップ
- [ ] Cargo プロジェクト初期化
- [ ] 依存関係追加（clap, toml, tokio等）
- [ ] ディレクトリ構造作成
- [ ] CI/CD パイプライン設定（GitHub Actions）
- [ ] エラー型定義（error.rs）

**成果物**: ビルド・テスト可能なプロジェクト骨格

#### Day 3-4: TOML 設定読み込み
- [ ] 設定スキーマ定義（config/schema.rs）
- [ ] TOML パーサー実装（config/loader.rs）
- [ ] 設定検証ロジック（config/validation.rs）
- [ ] 循環依存検出
- [ ] ユニットテスト作成

**成果物**: commands.toml 読み込み機能

#### Day 5-7: コマンド実行エンジン
- [ ] 変数展開実装（command/interpolation.rs）
- [ ] シェル検出（platform/shell.rs）
- [ ] 基本コマンド実行（command/executor.rs）
- [ ] プラットフォーム別処理（platform/unix.rs, windows.rs）
- [ ] 統合テスト作成

**成果物**: 単一コマンド実行機能

### Week 2: CLI インターフェース

#### Day 8-9: CLI 引数パース
- [ ] clap による引数定義（cli.rs）
- [ ] サブコマンド実装（run, list, help）
- [ ] グローバルオプション（--verbose, --dry-run等）
- [ ] ヘルプメッセージ整備

**成果物**: `cmdrun run <command>` が動作

#### Day 10-11: 出力フォーマット
- [ ] カラー出力実装（output/color.rs）
- [ ] フォーマッター実装（output/formatter.rs）
- [ ] ロガー設定（output/logger.rs）
- [ ] エラーメッセージ改善

**成果物**: 見やすい出力形式

#### Day 12-14: MVP 完成・テスト
- [ ] 統合テスト網羅
- [ ] ドキュメント作成（README.md）
- [ ] 使用例追加（examples/）
- [ ] バグ修正
- [ ] パフォーマンス測定

**成果物**: 基本機能完全動作版

**MVP マイルストーン**:
- ✅ TOML 設定ファイル読み込み
- ✅ 変数展開機能
- ✅ コマンド実行
- ✅ プラットフォーム対応
- ✅ 基本CLI

## Phase 2: Advanced Features（2週間）

### Week 3: 高度機能

#### Day 15-17: 並列実行
- [ ] 依存グラフ構築
- [ ] 並列実行エンジン（Tokio JoinSet）
- [ ] エラーハンドリング（fail_fast等）
- [ ] パフォーマンステスト

**成果物**: 並列コマンド実行機能

#### Day 18-19: フック・ライフサイクル
- [ ] pre_run / post_run フック
- [ ] コマンド別フック
- [ ] イベント通知
- [ ] テスト追加

**成果物**: ライフサイクルフック機能

#### Day 20-21: セキュリティ強化
- [ ] 機密情報保護（secrecy）
- [ ] ログマスキング
- [ ] セキュリティ監査（cargo-audit）
- [ ] セキュリティテスト

**成果物**: セキュアな実装

### Week 4: 拡張機能

#### Day 22-23: 追加サブコマンド
- [ ] `cmdrun init` - 設定ファイル生成
- [ ] `cmdrun validate` - 設定検証
- [ ] `cmdrun graph` - 依存グラフ可視化
- [ ] `cmdrun completion` - シェル補完

**成果物**: 便利サブコマンド群

#### Day 24-25: パフォーマンス最適化
- [ ] ベンチマーク作成（benches/）
- [ ] プロファイリング（flamegraph）
- [ ] 最適化実装
- [ ] 性能測定

**成果物**: 50ms以下起動時間達成

#### Day 26-28: ドキュメント・例
- [ ] 詳細ドキュメント作成
- [ ] 実用例追加（examples/）
- [ ] 移行ガイド（from npm scripts）
- [ ] FAQ 作成

**成果物**: 充実したドキュメント

## Phase 3: Polish & Release（1週間）

### Week 5: リリース準備

#### Day 29-30: 品質向上
- [ ] コードレビュー
- [ ] リファクタリング
- [ ] テストカバレッジ向上（80%以上）
- [ ] エラーメッセージ改善

#### Day 31-32: クロスプラットフォームテスト
- [ ] Linux テスト（x86_64, ARM64）
- [ ] macOS テスト（Intel, Apple Silicon）
- [ ] Windows テスト
- [ ] バグ修正

#### Day 33-34: パッケージング
- [ ] GitHub Releases セットアップ
- [ ] Homebrew Formula 作成
- [ ] Scoop Manifest 作成
- [ ] Docker イメージ作成
- [ ] インストールスクリプト作成

#### Day 35: リリース
- [ ] crates.io 公開
- [ ] GitHub Release v1.0.0
- [ ] リリースノート公開
- [ ] 告知（Twitter, Reddit等）

**リリース基準**:
- ✅ 全テスト通過
- ✅ 全プラットフォームビルド成功
- ✅ ドキュメント完備
- ✅ パフォーマンス目標達成
- ✅ セキュリティ監査通過

## Phase 4: Adoption & Growth（継続）

### v1.1.0（リリース1ヶ月後）
- [ ] ユーザーフィードバック対応
- [ ] バグ修正
- [ ] 小機能追加
- [ ] パフォーマンス改善

### v1.2.0（リリース3ヶ月後）
- [ ] JSON/YAML 設定サポート
- [ ] Watch モード（ファイル監視）
- [ ] 環境変数ファイル（.env）サポート
- [ ] プラグインシステム検討

### v2.0.0（リリース6ヶ月後）
- [ ] リモートコマンド実行
- [ ] クラウド連携
- [ ] GUI ツール
- [ ] 企業向け機能

## 開発プロセス

### 日次ルーチン
```bash
# 朝: 前日の変更を確認
git pull
cargo test

# 開発: 機能実装
# - 小さいコミット
# - テスト駆動開発
# - ドキュメント同時更新

# 夕方: コードレビュー・プッシュ
cargo fmt
cargo clippy
cargo test
git push
```

### 週次ルーチン
```bash
# パフォーマンス測定
cargo bench

# セキュリティ監査
cargo audit

# 依存関係更新
cargo outdated
cargo update
```

## マイルストーン

### MVP達成条件
- [ ] TOML設定ファイル読み込み
- [ ] 変数展開（${VAR}形式）
- [ ] コマンド実行（Unix/Windows）
- [ ] 依存関係解決
- [ ] 基本CLI（run, list）

### v1.0.0 リリース条件
- [ ] MVP機能完全実装
- [ ] 並列実行
- [ ] フック機能
- [ ] 全プラットフォーム対応
- [ ] ドキュメント完備
- [ ] テストカバレッジ 80%以上
- [ ] パフォーマンス目標達成
- [ ] セキュリティ監査通過
- [ ] 3つ以上の配布チャネル

### v2.0.0 ビジョン
- [ ] エンタープライズ機能
- [ ] クラウド連携
- [ ] GUI ツール
- [ ] 1000+ GitHub Stars

## リスク管理

### 技術リスク
- **Rust学習曲線**: Rust未経験者向けガイド作成
- **クロスプラットフォーム**: 早期テスト、CI/CD整備
- **パフォーマンス**: ベンチマーク継続、最適化優先

### スケジュールリスク
- **遅延対策**: MVP優先、機能削減判断
- **バッファ**: 各フェーズに20%バッファ
- **並行開発**: 独立機能は並行実装

### 品質リスク
- **バグ**: テスト駆動開発、コードレビュー
- **セキュリティ**: 専門家レビュー、監査ツール
- **互換性**: 早期ユーザーフィードバック

## 成功指標（KPI）

### 技術指標
- **起動時間**: 50ms以下
- **メモリ使用量**: 10MB以下
- **テストカバレッジ**: 80%以上
- **ビルド時間**: 30秒以内

### ユーザー指標
- **GitHub Stars**: 100（1ヶ月）, 500（3ヶ月）, 1000（6ヶ月）
- **crates.io ダウンロード**: 500/月（1ヶ月）, 2000/月（3ヶ月）
- **Issue解決率**: 80%以上
- **ユーザー満足度**: 4.5/5以上

### コミュニティ指標
- **コントリビューター**: 3人以上
- **Pull Request**: 10件以上マージ
- **ドキュメント**: 完全網羅
- **エコシステム**: プラグイン3つ以上
