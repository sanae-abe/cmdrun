# Internationalization (i18n) Guide

cmdrun supports multiple languages to provide a better user experience for developers worldwide.

## Supported Languages

- **English** (default)
- **Japanese** (日本語)

## Configuration

Set the language in your `commands.toml` configuration file:

```toml
[config]
language = "japanese"  # or "english"
```

If not specified, English is used by default.

## Language Scope

### Global Configuration

Place the language setting in your global configuration:

```toml
# ~/.cmdrun/commands.toml
[config]
language = "japanese"
```

This affects all projects that don't have their own configuration.

### Project-Specific Configuration

Override the language for a specific project:

```toml
# ./commands.toml (project directory)
[config]
language = "english"
```

Project-specific settings take precedence over global settings.

## Localized Commands

### Currently Supported

#### `cmdrun add`

Fully localized command for adding new commands interactively.

**Japanese Example:**
```bash
$ cmdrun add

=== Add New Command ===

コマンドID: test-cmd
コマンド: echo "Hello"
説明: テストコマンド

プレビュー:
  ID: test-cmd
  コマンド: echo "Hello"
  説明: テストコマンド

どうしますか？
> はい、このコマンドを追加
  いいえ、再編集
  キャンセル

✓ コマンドを追加しました 'test-cmd'
```

**English Example:**
```bash
$ cmdrun add

=== Add New Command ===

Command ID: test-cmd
Command: echo "Hello"
Description: Test command

Preview:
  ID: test-cmd
  Command: echo "Hello"
  Description: Test command

What would you like to do?
> Yes, add this command
  No, edit again
  Cancel

✓ Command added successfully 'test-cmd'
```

### Localized Message Categories

1. **Interactive Prompts**
   - Command ID, Command, Description, Category, Tags
   - Confirmation prompts
   - Selection menus

2. **Status Messages**
   - Adding/Removing/Updating commands
   - Running/Completed/Error states
   - Validation results

3. **Error Messages**
   - Empty input errors
   - Command not found
   - Duplicate command errors
   - Configuration errors

4. **Labels**
   - Preview, ID, Command, Description
   - Category, Tags
   - Current settings

## Future Localization

The following commands will be localized in future releases:

- `cmdrun edit` - Edit existing commands
- `cmdrun remove` - Remove commands
- `cmdrun list` - List all commands
- `cmdrun run` - Run command execution messages
- `cmdrun validate` - Configuration validation messages
- `cmdrun info` - Command information display
- `cmdrun search` - Search results

## Adding New Languages

To add support for a new language:

1. **Update Language Enum** (`src/config/schema.rs`):
```rust
pub enum Language {
    English,
    Japanese,
    YourLanguage,  // Add new language
}
```

2. **Add Translations** (`src/i18n.rs`):
```rust
match language {
    Language::English => { /* ... */ },
    Language::Japanese => { /* ... */ },
    Language::YourLanguage => {
        match key {
            Running => "Your translation",
            // Add all message keys
        }
    }
}
```

3. **Update Configuration**:
```toml
[config]
language = "yourlanguage"
```

## Best Practices

### For Users

1. **Set language once**: Configure in `~/.cmdrun/commands.toml` for consistency
2. **Project overrides**: Use project-specific settings when needed
3. **Share configurations**: Document the language setting in your team's setup guide

### For Contributors

1. **Keep messages concise**: Short, clear messages work better across languages
2. **Use placeholders**: Use `{0}`, `{1}` for variable substitution
3. **Context matters**: Provide context in comments for translators
4. **Test thoroughly**: Test all interactive flows in each language

## Examples

### Japanese Developer Workflow

```toml
# ~/.cmdrun/commands.toml
[config]
language = "japanese"

[commands.dev]
description = "開発サーバー起動"
cmd = "npm run dev"

[commands.test]
description = "テスト実行"
cmd = "npm test"
```

```bash
$ cmdrun list
利用可能なコマンド:
  dev  - 開発サーバー起動
  test - テスト実行

$ cmdrun run dev
実行中: 開発サーバー起動
...
✓ 完了
```

### English Developer Workflow

```toml
# ./commands.toml
[config]
language = "english"

[commands.dev]
description = "Start development server"
cmd = "npm run dev"

[commands.test]
description = "Run tests"
cmd = "npm test"
```

```bash
$ cmdrun list
Available commands:
  dev  - Start development server
  test - Run tests

$ cmdrun run dev
Running: Start development server
...
✓ Completed
```

## Troubleshooting

### Language not changing

1. Check configuration file location:
```bash
# Global config
cat ~/.cmdrun/commands.toml | grep language

# Project config
cat ./commands.toml | grep language
```

2. Verify language value:
```toml
[config]
language = "japanese"  # Must be lowercase
```

3. Rebuild if using development version:
```bash
cargo build --release
```

### Mixed language output

Some parts of cmdrun may still use English if:
- The command hasn't been localized yet
- System error messages (from dependencies)
- Debug/trace logs (always in English)

This is expected behavior and will improve as more commands are localized.

## Contributing Translations

We welcome translations! To contribute:

1. Check existing translations in `src/i18n.rs`
2. Follow the message key structure
3. Test your translations thoroughly
4. Submit a pull request with examples

For questions or suggestions, please open an issue on GitHub.
