# Internationalization (i18n) Guide

cmdrun supports multiple languages to provide a better user experience for developers worldwide.

## Supported Languages

- **English** (default)
- **Japanese** (æ—¥æœ¬èª)
- **Chinese Simplified** (ç®€ä½“ä¸­æ–‡)
- **Chinese Traditional** (ç¹é«”ä¸­æ–‡)

## Configuration

Set the language in your `commands.toml` configuration file:

```toml
[config]
language = "english"              # English (default)
language = "japanese"             # æ—¥æœ¬èª
language = "chinese_simplified"   # ç®€ä½“ä¸­æ–‡
language = "chinese_traditional"  # ç¹é«”ä¸­æ–‡
```

If not specified, English is used by default.

## Language Scope

### Global Configuration

Place the language setting in your global configuration:

```toml
# ~/.cmdrun/commands.toml
[config]
language = "japanese"
```

This affects all projects that don't have their own configuration.

### Project-Specific Configuration

Override the language for a specific project:

```toml
# ./commands.toml (project directory)
[config]
language = "english"
```

Project-specific settings take precedence over global settings.

## Localized Commands

### Currently Supported

#### `cmdrun add`

Fully localized command for adding new commands interactively.

**Japanese Example:**
```bash
$ cmdrun add

=== Add New Command ===

ã‚³ãƒãƒ³ãƒ‰ID: test-cmd
ã‚³ãƒãƒ³ãƒ‰: echo "Hello"
èª¬æ˜: ãƒ†ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰

ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼:
  ID: test-cmd
  ã‚³ãƒãƒ³ãƒ‰: echo "Hello"
  èª¬æ˜: ãƒ†ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰

ã©ã†ã—ã¾ã™ã‹ï¼Ÿ
> ã¯ã„ã€ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’è¿½åŠ 
  ã„ã„ãˆã€å†ç·¨é›†
  ã‚­ãƒ£ãƒ³ã‚»ãƒ«

âœ“ ã‚³ãƒãƒ³ãƒ‰ã‚’è¿½åŠ ã—ã¾ã—ãŸ 'test-cmd'
```

**English Example:**
```bash
$ cmdrun add

=== Add New Command ===

Command ID: test-cmd
Command: echo "Hello"
Description: Test command

Preview:
  ID: test-cmd
  Command: echo "Hello"
  Description: Test command

What would you like to do?
> Yes, add this command
  No, edit again
  Cancel

âœ“ Command added successfully 'test-cmd'
```

### Localized Message Categories

1. **Interactive Prompts**
   - Command ID, Command, Description, Category, Tags
   - Confirmation prompts
   - Selection menus

2. **Status Messages**
   - Adding/Removing/Updating commands
   - Running/Completed/Error states
   - Validation results

3. **Error Messages**
   - Empty input errors
   - Command not found
   - Duplicate command errors
   - Configuration errors

4. **Labels**
   - Preview, ID, Command, Description
   - Category, Tags
   - Current settings

## Localized Commands

All cmdrun commands are fully localized in all supported languages:

- âœ… `cmdrun add` - Add new commands
- âœ… `cmdrun edit` - Edit existing commands
- âœ… `cmdrun remove` - Remove commands
- âœ… `cmdrun list` - List all commands
- âœ… `cmdrun run` - Run command execution
- âœ… `cmdrun validate` - Configuration validation
- âœ… `cmdrun info` - Command information
- âœ… `cmdrun search` - Search commands
- âœ… `cmdrun config` - Configuration management
- âœ… `cmdrun watch` - File watching
- âœ… `cmdrun init` - Initialize configuration
- âœ… `cmdrun env` - Environment management
- âœ… `cmdrun graph` - Dependency graph visualization
- âœ… `cmdrun history` - Command history
- âœ… `cmdrun completion` - Shell completion
- âœ… `cmdrun open` - Open configuration file
- âœ… `cmdrun template` - Template management
- âœ… `cmdrun plugin` - Plugin management

## Adding New Languages

To add support for a new language:

1. **Update Language Enum** (`src/config/schema.rs`):
```rust
#[derive(Debug, Clone, Copy, PartialEq, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum Language {
    English,
    Japanese,
    ChineseSimplified,
    ChineseTraditional,
    YourLanguage,  // Add new language (use PascalCase)
}
```

2. **Add Translations** (`src/i18n.rs`):
```rust
match language {
    Language::English => { /* ... */ },
    Language::Japanese => { /* ... */ },
    Language::ChineseSimplified => { /* ... */ },
    Language::ChineseTraditional => { /* ... */ },
    Language::YourLanguage => {
        match key {
            Running => "Your translation",
            Completed => "Your translation",
            Error => "Your translation",
            // Add all 232 message keys
        }
    }
}
```

3. **Update Configuration** (uses snake_case):
```toml
[config]
language = "your_language"  # Automatically converted from YourLanguage
```

4. **Add README** (optional but recommended):
```bash
# Create localized README
cp README.md README.your-lang.md
# Translate the content
```

## Best Practices

### For Users

1. **Set language once**: Configure in `~/.cmdrun/commands.toml` for consistency
2. **Project overrides**: Use project-specific settings when needed
3. **Share configurations**: Document the language setting in your team's setup guide

### For Contributors

1. **Keep messages concise**: Short, clear messages work better across languages
2. **Use placeholders**: Use `{0}`, `{1}` for variable substitution
3. **Context matters**: Provide context in comments for translators
4. **Test thoroughly**: Test all interactive flows in each language

## Examples

### Japanese Developer Workflow

```toml
# ~/.cmdrun/commands.toml
[config]
language = "japanese"

[commands.dev]
description = "é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•"
cmd = "npm run dev"

[commands.test]
description = "ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ"
cmd = "npm test"
```

```bash
$ cmdrun list
åˆ©ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰:
  dev  - é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
  test - ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

$ cmdrun run dev
å®Ÿè¡Œä¸­: é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
...
âœ“ å®Œäº†
```

### English Developer Workflow

```toml
# ./commands.toml
[config]
language = "english"

[commands.dev]
description = "Start development server"
cmd = "npm run dev"

[commands.test]
description = "Run tests"
cmd = "npm test"
```

```bash
$ cmdrun list
Available commands:
  dev  - Start development server
  test - Run tests

$ cmdrun run dev
Running: Start development server
...
âœ“ Completed
```

### Chinese Developer Workflow (ç®€ä½“ä¸­æ–‡)

```toml
# ./commands.toml
[config]
language = "chinese_simplified"

[commands.dev]
description = "å¯åŠ¨å¼€å‘æœåŠ¡å™¨"
cmd = "npm run dev"

[commands.test]
description = "è¿è¡Œæµ‹è¯•"
cmd = "npm test"
```

```bash
$ cmdrun list
å¯ç”¨å‘½ä»¤:
  dev  - å¯åŠ¨å¼€å‘æœåŠ¡å™¨
  test - è¿è¡Œæµ‹è¯•

$ cmdrun run dev
è¿è¡Œä¸­: å¯åŠ¨å¼€å‘æœåŠ¡å™¨
...
âœ“ å·²å®Œæˆ
```

### Chinese Developer Workflow (ç¹é«”ä¸­æ–‡)

```toml
# ./commands.toml
[config]
language = "chinese_traditional"

[commands.dev]
description = "å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨"
cmd = "npm run dev"

[commands.test]
description = "åŸ·è¡Œæ¸¬è©¦"
cmd = "npm test"
```

```bash
$ cmdrun list
å¯ç”¨å‘½ä»¤:
  dev  - å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
  test - åŸ·è¡Œæ¸¬è©¦

$ cmdrun run dev
åŸ·è¡Œä¸­: å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
...
âœ“ å·²å®Œæˆ
```

## Troubleshooting

### Language not changing

1. Check configuration file location:
```bash
# Global config
cat ~/.cmdrun/commands.toml | grep language

# Project config
cat ./commands.toml | grep language
```

2. Verify language value:
```toml
[config]
language = "english"              # English
language = "japanese"             # Japanese
language = "chinese_simplified"   # Simplified Chinese (use snake_case)
language = "chinese_traditional"  # Traditional Chinese (use snake_case)
```

3. Rebuild if using development version:
```bash
cargo build --release
```

### Mixed language output

Some parts of cmdrun may still use English if:
- The command hasn't been localized yet
- System error messages (from dependencies)
- Debug/trace logs (always in English)

This is expected behavior and will improve as more commands are localized.

## Available README Files

cmdrun provides localized README documentation:

- ğŸ‡¬ğŸ‡§ [README.md](../../README.md) - English
- ğŸ‡¯ğŸ‡µ [README.ja.md](../../README.ja.md) - æ—¥æœ¬èª
- ğŸ‡¨ğŸ‡³ [README.zh-CN.md](../../README.zh-CN.md) - ç®€ä½“ä¸­æ–‡
- ğŸ‡¹ğŸ‡¼ [README.zh-TW.md](../../README.zh-TW.md) - ç¹é«”ä¸­æ–‡

## Contributing Translations

We welcome translations! To contribute:

1. Check existing translations in `src/i18n.rs`
2. Follow the message key structure (currently 232 keys)
3. Test your translations thoroughly with all commands
4. Add localized README (optional but recommended)
5. Submit a pull request with examples

**Translation Checklist**:
- âœ… All 232 MessageKey variants translated
- âœ… Consistent terminology across all messages
- âœ… Natural phrasing in target language
- âœ… Test all interactive commands (`add`, `edit`, `remove`, etc.)
- âœ… Verify TOML configuration parsing
- âœ… Add unit tests for new language

For questions or suggestions, please open an issue on GitHub.
